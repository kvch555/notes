<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN">
<head>
<title>新建网页</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="" />
<meta name="keywords" content="" />
<script type="text/javascript">

/*
作用域考试

注:这是一个极容易出错,又极基础的JS面试题
*/


/*
var str1 = 'global';

function  t1() {
    console.log(str1);
    console.log(str2);

    str2 = 'local';
}

t1();  



常见的3种答案
global , local
global , undefined
global , str2 is not defined错误

分析: 

19行执行, 在t1内寻找str1--没有,又在window上寻找str1,有. 打印global
20行执行, 在t1内寻找str2--没有,又在window上寻找str2,没有. 报str2 is not defined错误
22行: (实际上出错,没执行到这一些)  才把全局的str2变量赋上值
*/


var str1 = 'global';

function  t1() {
    console.log(str1);
    console.log(str2);

    var str2 = 'local';
}

t1();   // global undefined

/*
解释:

js代码自上而下执行!

但是----------
js代码在整体运行分:

词法分析期
运行期

自上而下执行之前 , 先有一个"词法分析过程"!


此上面的结果为例:


1步:分析t1函数

t1{
var str2    // 分析出 t1内有str2局部变量. 注意此时函数未执行,因此str2的值是undefined
}

2步: 执行t1函数
    console.log(str1);   // global
    console.log(str2);   // undefined
    str2 = 'local';  // 此时,str2的值为local

*/


/*

词法分析是我们的一个重点

*/




</script>

<style type="text/css">
</style>
</head>
    <body>
    </body>
</html>